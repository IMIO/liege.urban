<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:browser="http://namespaces.zope.org/browser"
    xmlns:plone="http://namespaces.plone.org/plone"
    i18n_domain="liege.urban">

    <!-- Publish static files -->
    <browser:resourceDirectory
        name="liege.urban"
        directory="static"
    />

    <include package=".cron" />
    <include file="table.zcml" />

    <adapter
        for="zope.interface.Interface"
        provides="Products.urban.interfaces.IUrbanRootRedirects"
        factory=".redirects.UrbanRootRedirects"
    />

    <browser:page
        for="zope.interface.Interface"
        name="activityreport"
        permission="zope2.View"
        class=".activity_report.LicencesExtractForm"
    />

    <browser:page
        for="zope.interface.Interface"
        name="urbanstatsview"
        permission="zope2.View"
        class=".activity_report.LicencesExtractFormView"
    />

    <adapter
        for="Products.urban.interfaces.IGenericLicence
             zope.publisher.interfaces.browser.IBrowserRequest
             .address_search.AddressSearchForm
             .address_search.StreetNameField
             z3c.form.interfaces.ITextWidget"
        provides="z3c.form.interfaces.IValue"
        factory=".address_search.DefaultStreetName"
        name="default"
    />

    <adapter
        for="Products.urban.interfaces.IGenericLicence
             zope.publisher.interfaces.browser.IBrowserRequest
             .address_search.AddressSearchForm
             .address_search.INSCodeField
             z3c.form.interfaces.ITextWidget"
        provides="z3c.form.interfaces.IValue"
        factory=".address_search.DefaultINSCode"
        name="default"
    />

    <adapter
        for="Products.urban.interfaces.IGenericLicence
             zope.publisher.interfaces.browser.IBrowserRequest
             .address_search.AddressSearchForm
             .address_search.StreetNumberField
             z3c.form.interfaces.ITextWidget"
        provides="z3c.form.interfaces.IValue"
        factory=".address_search.DefaultStreetNumber"
        name="default"
    />

  <adapter
        for="Products.urban.interfaces.IUniqueLicence
             zope.publisher.interfaces.browser.IBrowserRequest"
        provides="zope.interface.Interface"
        factory=".codt_uniquelicence.IsLeaderUser"
        name="is_licence_leader"
        permission="zope2.View"
  />

  <adapter
        for="Products.urban.interfaces.IUniqueLicence
             zope.publisher.interfaces.browser.IBrowserRequest"
        provides="zope.interface.Interface"
        factory=".codt_uniquelicence.IsUrbanLeader"
        name="is_urban_leader"
        permission="zope2.View"
  />

  <adapter
        for="Products.urban.interfaces.IUniqueLicence
             zope.publisher.interfaces.browser.IBrowserRequest"
        provides="zope.interface.Interface"
        factory=".codt_uniquelicence.IsEnvironmentLeader"
        name="is_environment_leader"
        permission="zope2.View"
  />

  <adapter
        for="Products.urban.interfaces.IUniqueLicence
             zope.publisher.interfaces.browser.IBrowserRequest"
        provides="zope.interface.Interface"
        factory=".codt_uniquelicence.IsUrbanUser"
        name="is_urban_user"
        permission="zope2.View"
  />

  <adapter
        for="Products.urban.interfaces.IUniqueLicence
             zope.publisher.interfaces.browser.IBrowserRequest"
        provides="zope.interface.Interface"
        factory=".codt_uniquelicence.IsEnvironmentUser"
        name="is_environment_user"
        permission="zope2.View"
  />

  <adapter
        for="Products.urban.interfaces.ICODT_UniqueLicence
             zope.publisher.interfaces.browser.IBrowserRequest"
        provides="zope.interface.Interface"
        factory=".codt_uniquelicence.IsLeaderUser"
        name="is_licence_leader"
        permission="zope2.View"
  />

  <adapter
        for="Products.urban.interfaces.ICODT_UniqueLicence
             zope.publisher.interfaces.browser.IBrowserRequest"
        provides="zope.interface.Interface"
        factory=".codt_uniquelicence.IsUrbanLeader"
        name="is_urban_leader"
        permission="zope2.View"
  />

  <adapter
        for="Products.urban.interfaces.ICODT_UniqueLicence
             zope.publisher.interfaces.browser.IBrowserRequest"
        provides="zope.interface.Interface"
        factory=".codt_uniquelicence.IsEnvironmentLeader"
        name="is_environment_leader"
        permission="zope2.View"
  />

  <adapter
        for="Products.urban.interfaces.ICODT_UniqueLicence
             zope.publisher.interfaces.browser.IBrowserRequest"
        provides="zope.interface.Interface"
        factory=".codt_uniquelicence.IsUrbanUser"
        name="is_urban_user"
        permission="zope2.View"
  />

  <adapter
        for="Products.urban.interfaces.ICODT_UniqueLicence
             zope.publisher.interfaces.browser.IBrowserRequest"
        provides="zope.interface.Interface"
        factory=".codt_uniquelicence.IsEnvironmentUser"
        name="is_environment_user"
        permission="zope2.View"
  />

  <adapter
        for="*
             zope.publisher.interfaces.browser.IBrowserRequest"
        provides="zope.interface.Interface"
        factory=".inspection.IsInspector"
        name="is_inspector"
        permission="zope2.View"
  />
<!-- 
    <unconfigure package="Products.urban">
          <browser:page
               name="licencetabs-macros"
               for="Products.urban.interfaces.IGenericLicence"
               class="Products.urban.browser.licence.licenceview.LicenceView"
               template="browser/licence/templates/licencetabsmacros.pt"
               permission="zope2.View"
               />
    </unconfigure> -->

     <browser:page
         name="licencetabs-macros"
         for="Products.urban.interfaces.IGenericLicence"
         class=".licenceview.LiegeLicenceView"
         template="templates/licencetabsmacros.pt"
         permission="zope2.View"
         layer="liege.urban.interfaces.ILiegeUrbanLayer"
         />

</configure>
